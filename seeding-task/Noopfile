COMPONENT SeedingTask task

RESOURCE AppDB dynamodb -s hashKeyName=name -s hashKeyType=S -s rangeKeyName=type -s rangeKeyType=S

FROM node:14-alpine
WORKDIR seeding-task

ENV NODE_ENV production

COPY package*.json ./
RUN npm ci

ENV NODE_ENV production
ENV DYNAMO_TABLE $.resources.AppDB.tableName
ENV DYNAMO_ENDPOINT $.resources.AppDB.endpoint

COPY index.js .
CMD npm start

LIFECYCLE beforeTraffic
